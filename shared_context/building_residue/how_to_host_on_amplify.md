# How to Host Network Sketchpad on AWS Amplify

This guide will walk you through deploying your Network Sketchpad application to AWS Amplify for free hosting with a custom domain and CI/CD capabilities.

## Prerequisites

- AWS Account (free tier available)
- GitHub repository with your code (which you already have)
- Basic familiarity with AWS console

## Overview

Your Network Sketchpad app is a static web application that consists of:
- Static HTML (`www/index.html`)
- Bundled JavaScript (`www/built-fsm.js`)
- A Python build script (`build_fsm.py`)

AWS Amplify is perfect for this type of application as it provides:
- Free hosting for static sites
- Automatic builds from GitHub
- Custom domain support
- SSL certificates
- CDN distribution

## Step-by-Step Deployment

### 1. Prepare Your Repository

First, ensure your repository is properly configured:

1. **Create a build configuration file** - Create `amplify.yml` in your project root:

```yaml
version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Installing Python dependencies..."
    build:
      commands:
        - echo "Building the application..."
        - python3 build_fsm.py
    postBuild:
      commands:
        - echo "Build completed"
  artifacts:
    baseDirectory: www
    files:
      - '**/*'
  cache:
    paths: []
```

2. **Verify your www directory** contains:
   - `index.html` (your main page)
   - `built-fsm.js` (generated by build script)
   - Any other static assets

3. **Commit and push** these changes to your GitHub repository.

### 2. Set Up AWS Amplify

1. **Sign in to AWS Console**
   - Go to [AWS Console](https://console.aws.amazon.com/)
   - Sign in or create a new account

2. **Navigate to AWS Amplify**
   - Search for "Amplify" in the AWS services search
   - Click on "AWS Amplify"

3. **Create a New App**
   - Click "Get Started" under "Deploy"
   - Choose "GitHub" as your repository service
   - Click "Continue"

### 3. Connect Your Repository

1. **Authorize AWS Amplify** to access your GitHub account
2. **Select Repository**:
   - Repository: `isaachowen/fsm`
   - Branch: `master` (or your main branch)
3. Click "Next"

### 4. Configure Build Settings

1. **App name**: Enter "network-doodler" (or your preferred name)
2. **Environment name**: Leave as "main"
3. **Build and test settings**: 
   - AWS Amplify should auto-detect your `amplify.yml` file
   - If not, you can paste the YAML content from Step 1
4. **Advanced settings** (optional):
   - You can add environment variables if needed
5. Click "Next"

### 5. Review and Deploy

1. **Review all settings**
2. Click "Save and Deploy"

AWS Amplify will now:
- Clone your repository
- Run the build process (executing `python3 build_fsm.py`)
- Deploy your static files from the `www` directory
- Provide you with a live URL

### 6. Access Your Live Application

After deployment (usually 2-5 minutes):
1. You'll see a URL like: `https://main.d1234567890.amplifyapp.com`
2. Click the URL to view your live Network Sketchpad application
3. Test all functionality to ensure everything works correctly

## Custom Domain Setup (Optional)

### Using AWS Route 53

1. **In Amplify Console**, go to "Domain management"
2. Click "Add domain"
3. Enter your domain name (e.g., `networkdoodler.com`)
4. Follow the DNS configuration steps
5. AWS will automatically provision SSL certificates

### Using External DNS Provider

1. **In Amplify Console**, go to "Domain management" 
2. Click "Add domain"
3. Enter your domain
4. Choose "Use a third-party DNS provider"
5. Add the provided CNAME records to your DNS provider

## Continuous Deployment

Your app is now set up for automatic deployment:

- **Any push to your `master` branch** will trigger a new build and deployment
- **Build status** is visible in the Amplify console
- **Build logs** help debug any issues
- **Rollback** to previous versions is available

## Monitoring and Management

### Build Notifications

1. Go to "General" settings in Amplify console
2. Set up notifications for build success/failure
3. Configure email or SNS notifications

### Performance Monitoring

- Amplify provides basic analytics
- Monitor page views, unique visitors, and performance metrics
- Set up custom metrics if needed

## Troubleshooting

### Common Issues

1. **Build Failures**:
   - Check build logs in Amplify console
   - Ensure `build_fsm.py` runs without errors
   - Verify Python version compatibility

2. **Missing Files**:
   - Ensure `www` directory contains all necessary files
   - Check that `built-fsm.js` is generated correctly
   - Verify `amplify.yml` artifacts configuration

3. **JavaScript Errors**:
   - Test locally before deployment
   - Check browser console for errors
   - Ensure all file paths are correct

### Build Command Alternatives

If the Python build step fails, you can modify `amplify.yml`:

```yaml
version: 1
frontend:
  phases:
    preBuild:
      commands:
        - python3 --version  # Verify Python availability
    build:
      commands:
        - ls -la src/  # Debug: list source files
        - python3 build_fsm.py  # Build the app
        - ls -la www/  # Debug: verify output
```

## Cost Considerations

### Free Tier Limits
- **Build minutes**: 1,000 minutes/month
- **Data storage**: 5 GB
- **Data transfer**: 15 GB/month served

### Beyond Free Tier
- **Build minutes**: $0.01 per minute
- **Data storage**: $0.023 per GB/month
- **Data transfer**: $0.15 per GB

For a typical personal project like Network Sketchpad, you'll likely stay within the free tier limits.

## Security Considerations

1. **SSL/TLS**: Automatically provided by Amplify
2. **Access logs**: Available in CloudWatch
3. **DDoS protection**: Included via CloudFront
4. **Branch-based access**: Can restrict access to development branches

## Alternative Deployment Options

If AWS Amplify doesn't meet your needs, consider:

1. **Netlify**: Similar service with generous free tier
2. **Vercel**: Excellent for static sites with global CDN
3. **GitHub Pages**: Free hosting directly from your repository
4. **Firebase Hosting**: Google's static hosting solution

## Next Steps

After successful deployment:

1. **Test thoroughly**: Verify all features work in production
2. **Set up monitoring**: Track usage and performance
3. **Configure custom domain**: Make it accessible via your own URL
4. **Set up analytics**: Track user engagement
5. **Plan for scaling**: Monitor usage as your app grows

## Support Resources

- [AWS Amplify Documentation](https://docs.aws.amazon.com/amplify/)
- [AWS Free Tier Details](https://aws.amazon.com/free/)
- [Amplify Console User Guide](https://docs.aws.amazon.com/amplify/latest/userguide/)
- [GitHub Integration Guide](https://docs.aws.amazon.com/amplify/latest/userguide/getting-started.html)

---

**Estimated Setup Time**: 15-30 minutes  
**Estimated Cost**: Free (within AWS free tier limits)  
**Difficulty Level**: Beginner to Intermediate

Your Network Sketchpad application will be live and accessible worldwide with automatic HTTPS, CDN distribution, and continuous deployment from your GitHub repository!